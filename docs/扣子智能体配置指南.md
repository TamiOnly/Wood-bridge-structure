# 扣子（Coze）智能体配置指南

## 概述

系统现在支持使用扣子（Coze）平台的智能体进行智能问答。扣子是字节跳动推出的AI平台，支持创建自定义智能体。

## 已配置

✅ **API Key 已配置**：
```
COZE_API_KEY=pat_yqeqvCpWcmBMBfEZjEZbM71LMdwSOXoAWxzfbOpKGSGaXeaHJvAjGZOgHY3khQpW
```

## 需要配置 Bot ID

### 如何获取 Bot ID

1. **登录扣子平台**
   - 访问 [扣子开放平台](https://www.coze.cn/) 或 [扣子开发者平台](https://open.coze.cn/)

2. **找到您的智能体**
   - 进入"我的Bots"或"我的智能体"页面
   - 找到您创建的桥梁学习智能体

3. **获取 Bot ID**
   - 点击进入智能体详情页
   - Bot ID 通常在以下位置：
     - URL 中：`https://www.coze.cn/space/xxx/bot/` **后面的数字就是 Bot ID**
     - 或智能体设置页面中显示
     - 格式通常是纯数字，如：`1234567890`

### 配置 Bot ID

在 `.env` 文件中，将 `COZE_BOT_ID` 设置为您智能体的 Bot ID：

```env
COZE_BOT_ID=您的Bot ID（纯数字）
```

例如：
```env
COZE_BOT_ID=1234567890
```

## 完整配置示例

```env
# 扣子（Coze）智能体 API 配置
COZE_API_KEY=pat_yqeqvCpWcmBMBfEZjEZbM71LMdwSOXoAWxzfbOpKGSGaXeaHJvAjGZOgHY3khQpW
COZE_BOT_ID=您的Bot ID
```

## 验证配置

配置完成后，运行测试脚本：

```bash
node scripts/test-coze-api.js
```

或者重启应用并测试聊天功能。

## 常见问题

### Q: 如何找到 Bot ID？

A: 
1. 登录扣子平台
2. 进入智能体详情页
3. 查看 URL 中的数字，或查看智能体设置

### Q: API Key 格式是什么？

A: 扣子的 API Key 格式是 `pat_` 开头的长字符串，您已经正确配置了。

### Q: 智能体需要公开吗？

A: 为了通过API调用，智能体需要：
- 发布（Published）
- 或者在API调用时有权限访问

### Q: 支持哪些扣子API功能？

A: 当前实现支持：
- ✅ 文本对话
- ✅ 流式和非流式响应
- ✅ 多种响应格式解析

## 下一步

1. ✅ 获取 Bot ID
2. ✅ 在 `.env` 文件中配置 `COZE_BOT_ID`
3. ✅ 重启应用：`npm run dev`
4. ✅ 测试聊天功能

配置完成后，系统将使用您在扣子上创建的智能体来回答问题！

